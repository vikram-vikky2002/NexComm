<div class="glass-container" @fadeIn>
  <div class="blur-background"></div>

  <div class="glass-card" @floatIn>
    <div class="password-header">
      <h1 class="logo">NexComm</h1>
      <h2 class="subtitle">Change Password</h2>
    </div>

    <form class="password-form" (ngSubmit)="onSubmit()">
      <!-- Current Password -->
      <div class="form-group password-strength-container">
        <label for="currentPassword">Current Password</label>
        <input type="password"
               id="currentPassword"
               [(ngModel)]="currentPassword"
               name="currentPassword"
               required
               placeholder="Enter current password"
               class="glass-input">
      </div>

      <!-- New Password -->
      <div class="form-group password-strength-container">
        <label for="newPassword">New Password</label>
        <input type="password"
               id="newPassword"
               [(ngModel)]="newPassword"
               name="newPassword"
               required
               placeholder="Enter new password"
               class="glass-input"
               (input)="validateNewPassword()"
               (focus)="showPasswordHints = true"
               (blur)="showPasswordHints = false; hideStrengthPopup()">

        <!-- Password strength popup -->
        <div @strengthPopup *ngIf="showStrengthPopup"
             class="strength-popup {{strengthClass}}">
          {{strengthMessage}}
        </div>

        <!-- Password requirements -->
        <div class="password-hints" *ngIf="showPasswordHints">
          <p class="hint-title">Password must contain:</p>
          <ul class="hint-list">
            <li [class.valid]="hasMinLength">✓ At least 8 characters</li>
            <li [class.valid]="hasUppercase">✓ One uppercase letter</li>
            <li [class.valid]="hasNumber">✓ One number</li>
            <li [class.valid]="hasSpecialChar">✓ One special character</li>
          </ul>
        </div>
      </div>

      <!-- Confirm Password -->
      <div class="form-group">
        <label for="confirmPassword">Confirm Password</label>
        <input type="password"
               id="confirmPassword"
               [(ngModel)]="confirmPassword"
               name="confirmPassword"
               required
               placeholder="Confirm new password"
               class="glass-input"
               (input)="validateConfirmPassword()">
        <div class="error-message" *ngIf="showConfirmError">
          Passwords do not match
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="glass-button secondary" (click)="onCancel()">
          Cancel
        </button>
        <button type="submit" class="glass-button" [disabled]="isLoading || !isFormValid">
          <span *ngIf="!isLoading">Change Password</span>
          <div *ngIf="isLoading" class="spinner"></div>
          <div class="liquid"></div>
        </button>
      </div>
    </form>
  </div>
</div>
